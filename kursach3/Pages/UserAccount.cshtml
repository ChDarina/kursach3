@page
@using Microsoft.AspNetCore.Identity
@using kursach3.Models
@model kursach3.Pages.UserAccountModel
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<div>
<form method="post">
    <h4>User Account</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.UserAccountViewModel.UserName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.UserAccountViewModel.UserName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.UserAccountViewModel.Bio)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.UserAccountViewModel.Bio)
        </dd>
    </dl>

@if (@User.Identity?.Name != UserAccountModel.UserFriend.UserName)
{
    if(!UserAccountModel.FriendExist)
    {
        <input type="submit" value="Add a new friend" class="btn btn-primary" />
    }
    else
    {
        if(UserAccountModel.Friend.Confirmed)
        {
            <h4>This User is already your friend since @UserAccountModel.Friend.Timestamp!</h4>
        }
        else
        {
            if(UserAccountModel.Friend.UserId == UserAccountModel.UserFriend.Id) 
            {
                <input type="submit" value="Confirm" class="btn btn-primary" />
            }
            else
            {
                <h4>Wait until the confirmation!</h4>      
            }
        }
    }
}
</form>
</div>
